<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Créer mon cabinet — Genda</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
.gi{display:inline-block;width:1em;height:1em;vertical-align:-.125em;flex-shrink:0}
.gi-lg{width:1.4em;height:1.4em}
.gi-xl{width:2em;height:2em}

/* ── Kill mobile browser helpers ── */
*{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}
html{-webkit-text-size-adjust:none;-ms-text-size-adjust:none}
body,div,span,label,p,h1,h2,h3,h4,a,button,td,th,li{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
input,textarea,select,[contenteditable]{-webkit-user-select:text!important;-moz-user-select:text!important;user-select:text!important;-webkit-touch-callout:default!important}

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#FAFAF9;--white:#FFF;--surface:#F5F4F1;--surface-2:#EDEBE8;--border:#E0DDD8;--border-light:#ECEAE6;--text:#1A1816;--text-2:#3D3832;--text-3:#6B6560;--text-4:#9C958E;--primary:#E07A5F;--primary-hover:#C9684F;--primary-light:#FEF7F5;--primary-soft:#FDF0EC;--primary-border:#F2C4B5;--green:#1B7A42;--green-bg:#EEFAF1;--gold:#A68B3C;--gold-bg:#FAF6EC;--gold-border:#E8DCBA;--red:#DC2626;--red-bg:#FEF2F2;--serif:'DM Serif Display',Georgia,serif;--sans:'Outfit',-apple-system,sans-serif;--shadow:0 2px 8px rgba(0,0,0,.05);--radius:14px;--radius-sm:10px;--radius-xs:6px}
body{background:var(--bg);color:var(--text);font-family:var(--sans);-webkit-font-smoothing:antialiased;min-height:100vh}

/* Layout */
.page{display:flex;min-height:100vh}
.left{width:400px;background:linear-gradient(160deg,#2C2420,#3D2F28);color:#fff;padding:40px;display:flex;flex-direction:column;position:sticky;top:0;height:100vh}
.left-logo{display:flex;align-items:center;gap:8px;margin-bottom:auto}
.left-logo .l{width:32px;height:32px;border-radius:9px;background:var(--primary);display:flex;align-items:center;justify-content:center;font-family:var(--serif);font-size:.95rem}
.left-logo .w{font-family:var(--serif);font-size:1.15rem}
.left-body{margin:auto 0}
.left-body h2{font-family:var(--serif);font-size:1.7rem;line-height:1.2;margin-bottom:10px;font-weight:400}
.left-body h2 em{font-style:italic;color:#E8A090}
.left-body p{font-size:.85rem;color:rgba(255,255,255,.45);line-height:1.6}
.left-foot{margin-top:auto;font-size:.7rem;color:rgba(255,255,255,.25)}

.right{flex:1;display:flex;align-items:flex-start;justify-content:center;padding:40px;overflow-y:auto}
.container{width:100%;max-width:520px;padding-top:16px}

/* Progress */
.progress{display:none;margin-bottom:28px}
.progress.show{display:block}
.pbar{height:4px;background:var(--surface-2);border-radius:4px;overflow:hidden;margin-bottom:8px}
.pfill{height:100%;background:var(--primary);border-radius:4px;transition:width .4s ease}
.pinfo{display:flex;justify-content:space-between;font-size:.73rem;color:var(--text-4)}

/* Steps */
.step{display:none}
.step.active{display:block;animation:fadeIn .35s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

.step-hdr{margin-bottom:20px}
.step-hdr .lbl{font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--primary);margin-bottom:4px}
.step-hdr h2{font-family:var(--serif);font-size:1.5rem;font-weight:400;margin-bottom:3px}
.step-hdr p{font-size:.85rem;color:var(--text-3)}

/* Form */
.fg{margin-bottom:14px}
.fl{display:block;font-size:.75rem;font-weight:600;color:var(--text-2);margin-bottom:4px}
.fl .opt{font-weight:400;color:var(--text-4)}
.fi{width:100%;padding:10px 12px;border:1.5px solid var(--border);border-radius:var(--radius-xs);font-family:var(--sans);font-size:.85rem;color:var(--text);background:var(--white);outline:none;transition:border-color .15s}
.fi:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-soft)}
.fi::placeholder{color:var(--text-4)}
.ft{resize:vertical;min-height:90px;line-height:1.5}
.fr{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.fh{font-size:.68rem;color:var(--text-4);margin-top:2px}
.slug-prev{display:flex;gap:3px;margin-top:3px;font-size:.73rem}
.slug-prev .d{color:var(--text-4)}.slug-prev .s{color:var(--primary);font-weight:600}

/* Error */
.err{display:none;padding:10px 14px;background:var(--red-bg);border:1px solid #FECACA;border-radius:var(--radius-xs);font-size:.8rem;color:var(--red);margin-bottom:14px}
.err.show{display:block}

/* Sector grid */
.sectors{display:grid;grid-template-columns:repeat(4,1fr);gap:7px;margin-top:4px}
.sec-btn{padding:12px 8px;border:1.5px solid var(--border);border-radius:var(--radius-sm);background:var(--white);cursor:pointer;text-align:center;transition:all .15s;font-family:var(--sans)}
.sec-btn:hover{border-color:var(--primary-border);background:var(--primary-light)}
.sec-btn.sel{border-color:var(--primary);background:var(--primary-light);box-shadow:0 0 0 3px var(--primary-soft)}
.sec-btn .i{font-size:1.2rem;margin-bottom:3px}
.sec-btn .n{font-size:.75rem;font-weight:600;color:var(--text)}

/* Toggles */
.trow{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border-light)}
.trow:last-child{border:none}
.tlbl{font-size:.83rem;color:var(--text-2)}
.tlbl .sub{display:block;font-size:.7rem;color:var(--text-4);font-weight:400}
.tog{width:40px;height:22px;background:var(--surface-2);border-radius:11px;cursor:pointer;position:relative;transition:background .2s;flex-shrink:0}
.tog.on{background:var(--primary)}
.tog::after{content:'';width:16px;height:16px;background:#fff;border-radius:50%;position:absolute;top:3px;left:3px;transition:transform .2s;box-shadow:0 1px 3px rgba(0,0,0,.15)}
.tog.on::after{transform:translateX(18px)}

/* Schedule */
.schrow{display:grid;grid-template-columns:90px 38px 1fr 1fr;gap:6px;align-items:center;padding:5px 0;border-bottom:1px solid var(--border-light)}
.schday{font-size:.8rem;font-weight:600;color:var(--text-2)}
.schi{padding:6px;border:1.5px solid var(--border);border-radius:var(--radius-xs);font-family:var(--sans);font-size:.75rem;width:100%;text-align:center;outline:none}
.schi:focus{border-color:var(--primary)}.schi:disabled{background:var(--surface);color:var(--text-4)}

/* Service rows */
.svc{display:flex;align-items:center;gap:8px;padding:9px 10px;background:var(--white);border:1px solid var(--border-light);border-radius:var(--radius-xs);margin-bottom:5px}
.svc .dot{width:7px;height:7px;border-radius:3px;flex-shrink:0}
.svc .inf{flex:1}.svc .inf .nm{font-size:.83rem;font-weight:600}.svc .inf .mt{font-size:.7rem;color:var(--text-4)}

/* Spec tags */
.stags{display:flex;flex-wrap:wrap;gap:5px;margin-top:6px}
.stag{padding:5px 12px;border:1.5px solid var(--border);border-radius:18px;font-family:var(--sans);font-size:.75rem;font-weight:500;color:var(--text-3);cursor:pointer;transition:all .15s;background:var(--white)}
.stag:hover{border-color:var(--primary-border)}.stag.sel{background:var(--primary-light);border-color:var(--primary);color:var(--primary);font-weight:600}

/* Callout */
.clo{padding:10px 14px;border-radius:var(--radius-xs);font-size:.8rem;margin:10px 0}
.clo.info{background:var(--primary-light);color:var(--primary);border:1px solid var(--primary-border)}
.clo.tip{background:var(--gold-bg);color:var(--gold);border:1px solid var(--gold-border)}

/* Go live */
.golive{background:var(--white);border-radius:var(--radius);border:2px solid #B8E6C4;padding:28px;text-align:center}
.golive .icon{font-size:2.8rem;margin-bottom:10px}
.golive h3{font-family:var(--serif);font-size:1.4rem;margin-bottom:4px}
.golive p{font-size:.85rem;color:var(--text-3)}
.golive .url{display:inline-flex;padding:8px 16px;background:var(--surface);border-radius:var(--radius-xs);font-family:monospace;font-size:.85rem;color:var(--primary);font-weight:600;margin:14px 0;cursor:pointer}
.golive .acts{display:flex;gap:6px;justify-content:center;flex-wrap:wrap;margin-top:12px}
.golive .acts a{padding:8px 14px;border-radius:var(--radius-xs);font-size:.78rem;font-weight:600;cursor:pointer;border:1.5px solid var(--border);background:var(--white);color:var(--text-2);text-decoration:none;transition:all .15s}
.golive .acts a:hover{background:var(--surface)}
.golive .acts a.pri{background:var(--primary);color:#fff;border-color:var(--primary)}

/* Nav buttons */
.snav{display:flex;justify-content:space-between;align-items:center;margin-top:24px;padding-top:18px;border-top:1px solid var(--border-light)}
.btn-back{padding:8px 16px;font-family:var(--sans);font-size:.82rem;color:var(--text-3);background:none;border:none;cursor:pointer}
.btn-back:hover{color:var(--text)}
.btn-next{padding:11px 24px;background:var(--primary);color:#fff;border:none;border-radius:var(--radius-sm);font-family:var(--sans);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .15s}
.btn-next:hover{background:var(--primary-hover)}.btn-next:disabled{background:var(--surface-2);color:var(--text-4);cursor:not-allowed}
.btn-skip{padding:8px 14px;font-family:var(--sans);font-size:.78rem;color:var(--text-4);background:none;border:none;cursor:pointer}

/* Add button */
.add-btn{display:flex;align-items:center;gap:5px;padding:8px 14px;border:1.5px dashed var(--border);border-radius:var(--radius-sm);background:transparent;cursor:pointer;font-family:var(--sans);font-size:.8rem;color:var(--text-3);transition:all .15s;width:100%;justify-content:center;margin-top:8px}
.add-btn:hover{border-color:var(--primary);color:var(--primary);background:var(--primary-light)}

@media(max-width:900px){.page{flex-direction:column}.left{width:100%;height:auto;position:relative;padding:24px}.right{padding:20px}}
@media(max-width:500px){.sectors{grid-template-columns:1fr 1fr 1fr}.fr{grid-template-columns:1fr}.schrow{grid-template-columns:70px 34px 1fr 1fr;gap:3px}}
</style>
</head>
<body>

<div class="page">
  <aside class="left">
    <div class="left-logo"><div class="l">G</div><span class="w">Genda</span></div>
    <div class="left-body">
      <h2 id="lTitle">Créez votre <em>cabinet en ligne</em></h2>
      <p id="lDesc">En quelques minutes, vous aurez une page professionnelle avec prise de rendez-vous intégrée.</p>
    </div>
    <div class="left-foot">© 2026 Genda · Belgique <svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><line x1="8.67" y1="4" x2="8.67" y2="20"/><line x1="15.33" y1="4" x2="15.33" y2="20"/></svg></div>
  </aside>

  <main class="right">
    <div class="container">

      <div class="progress" id="prog">
        <div class="pbar"><div class="pfill" id="pFill" style="width:10%"></div></div>
        <div class="pinfo"><span id="pLabel">Étape 1/11</span><span id="pPct">9%</span></div>
      </div>

      <div class="err" id="errMsg"></div>

      <!-- ===== STEP 0: CREATE ACCOUNT ===== -->
      <div class="step active" data-step="0">
        <div class="step-hdr">
          <h2>Créer votre compte</h2>
          <p>30 secondes. Gratuit, sans engagement.</p>
        </div>
        <div class="fg"><label class="fl">Votre nom complet</label><input class="fi" id="f_name" placeholder="Pierre De Wit"></div>
        <div class="fg"><label class="fl">Email professionnel</label><input class="fi" type="email" id="f_email" placeholder="pierre@dewit-compta.be"></div>
        <div class="fg"><label class="fl">Nom du cabinet</label><input class="fi" id="f_biz" placeholder="De Wit & Associés" oninput="updSlug()"></div>
        <div class="slug-prev"><span class="d">genda.be/</span><span class="s" id="slugPrev">votre-cabinet</span></div>
        <div class="fg" style="margin-top:10px"><label class="fl">Mot de passe <span class="opt">(optionnel)</span></label><input class="fi" type="password" id="f_pass" placeholder="Min. 8 caractères"></div>
        <div class="fg"><label class="fl">Votre secteur</label>
          <div class="sectors">
            <button class="sec-btn" onclick="selSec(this,'coiffeur')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></svg></div><div class="n">Coiffeur·se</div></button>
            <button class="sec-btn" onclick="selSec(this,'esthetique')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2v14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2"/><path d="M6 8h12"/><path d="M10 18v4"/><path d="M14 18v4"/></svg></div><div class="n">Esthétique</div></button>
            <button class="sec-btn" onclick="selSec(this,'massage')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c6-3.5 8-10 8-14 0-.5 0-1-.5-1.5C18 5 14 3 12 2c-2 1-6 3-7.5 4.5C4 7 4 7.5 4 8c0 4 2 10.5 8 14z"/><path d="M5 8.5c2.5 2 4.5 4.5 5 8.5"/><path d="M19 8.5c-2.5 2-4.5 4.5-5 8.5"/></svg></div><div class="n">Bien-être</div></button>
            <button class="sec-btn" onclick="selSec(this,'osteo')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="4" r="2"/><path d="M4 20h4l2-4 2 4h4"/><path d="M8 16l-3-5h14l-3 5"/></svg></div><div class="n">Ostéopathe</div></button>
            <button class="sec-btn" onclick="selSec(this,'medecin')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"/><circle cx="20" cy="10" r="2"/></svg></div><div class="n">Médecin</div></button>
            <button class="sec-btn" onclick="selSec(this,'dentiste')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5.5c-1.7-1.4-4-2-6-1.5C4 4.5 3 6 3 8c0 4 3 10 5 12 .7.7 1.5.5 2-.5l.5-1c.3-.7 1-1 1.5-1s1.2.3 1.5 1l.5 1c.5 1 1.3 1.2 2 .5 2-2 5-8 5-12 0-2-1-3.5-3-4-2-.5-4.3.1-6 1.5z"/></svg></div><div class="n">Dentiste</div></button>
            <button class="sec-btn" onclick="selSec(this,'kine')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg></div><div class="n">Kiné</div></button>
            <button class="sec-btn" onclick="selSec(this,'comptable')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg></div><div class="n">Comptable</div></button>
            <button class="sec-btn" onclick="selSec(this,'avocat')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg></div><div class="n">Avocat</div></button>
            <button class="sec-btn" onclick="selSec(this,'veterinaire')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="4" r="2"/><circle cx="18" cy="8" r="2"/><circle cx="4" cy="8" r="2"/><path d="M12 14c-2.5-2.5-6-3-6-3s-.5 3.5 2 6 6 3 6 3 .5-3.5-2-6Z"/></svg></div><div class="n">Vétérinaire</div></button>
            <button class="sec-btn" onclick="selSec(this,'photographe')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></div><div class="n">Photographe</div></button>
            <button class="sec-btn" onclick="selSec(this,'autre')"><div class="i"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg></div><div class="n">Autre</div></button>
          </div>
        </div>
        <div class="snav" style="border:none;padding-top:6px">
          <span style="font-size:.75rem;color:var(--text-4)">Déjà inscrit ? <a href="/login.html" style="color:var(--primary);font-weight:600;text-decoration:none">Se connecter</a></span>
          <button class="btn-next" id="btnSignup" onclick="doSignup()">Créer mon compte →</button>
        </div>
      </div>

      <!-- ===== STEP 1: CABINET INFO ===== -->
      <div class="step" data-step="1">
        <div class="step-hdr"><div class="lbl">Étape 1 · Cabinet</div><h2>Informations du cabinet</h2><p>Apparaîtront sur votre page publique.</p></div>
        <div class="fr">
          <div class="fg"><label class="fl">Téléphone</label><input class="fi" id="f_phone" placeholder="+32 2 123 45 67"></div>
          <div class="fg"><label class="fl">Langue</label><select class="fi" id="f_lang"><option value="fr">Français</option><option value="nl">Nederlands</option></select></div>
        </div>
        <div class="fg"><label class="fl">Adresse</label><input class="fi" id="f_addr" placeholder="Avenue Louise 142, 1050 Bruxelles"></div>
        <div class="fg"><label class="fl">Info parking <span class="opt">(optionnel)</span></label><input class="fi" id="f_parking" placeholder="Parking gratuit derrière le bâtiment"></div>
        <div class="snav"><button class="btn-back" onclick="go(0)">← Retour</button><button class="btn-next" onclick="saveCabinetInfo()">Continuer →</button></div>
      </div>

      <!-- ===== STEP 2: SCHEDULE ===== -->
      <div class="step" data-step="2">
        <div class="step-hdr"><div class="lbl">Étape 2 · Horaires</div><h2>Vos disponibilités</h2><p>Horaires par défaut. Modifiables à tout moment.</p></div>
        <div id="schedGrid"></div>
        <div class="clo tip" style="margin-top:12px"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg> Pause midi pré-configurée. Exceptions (congés) éditables depuis le dashboard.</div>
        <div class="snav"><button class="btn-back" onclick="go(1)">← Retour</button><button class="btn-next" onclick="saveSchedule()">Continuer →</button></div>
      </div>

      <!-- ===== STEP 3: SERVICES ===== -->
      <div class="step" data-step="3">
        <div class="step-hdr"><div class="lbl">Étape 3 · Prestations</div><h2>Vos consultations</h2><p>Pré-remplies pour votre secteur.</p></div>
        <div id="svcList"></div>
        <div class="clo info" style="margin-top:10px">Personnalisez durées, tarifs et modes depuis le dashboard.</div>
        <div class="snav"><button class="btn-back" onclick="go(2)">← Retour</button><button class="btn-next" onclick="saveOnboardingStep('services',4)">Continuer →</button></div>
      </div>

      <!-- ===== STEP 4: TEAM ===== -->
      <div class="step" data-step="4">
        <div class="step-hdr"><div class="lbl">Étape 4 · Équipe</div><h2>Votre équipe</h2><p>Vous êtes déjà ajouté. Complétez votre bio.</p></div>
        <div style="background:var(--white);border:1px solid var(--border-light);border-radius:var(--radius);padding:18px;margin-bottom:10px">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
            <div style="width:42px;height:42px;border-radius:11px;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-family:var(--serif);font-size:.9rem" id="ownerAvatar">PD</div>
            <div><div style="font-size:.88rem;font-weight:700" id="ownerName">Votre nom</div><div style="font-size:.7rem;color:var(--text-4)" id="ownerTitle">Propriétaire</div></div>
          </div>
          <div class="fg"><label class="fl">Bio courte</label><textarea class="fi ft" id="f_bio" rows="3" placeholder="16 ans d'expérience en fiscalité belge..."></textarea></div>
          <div class="fr">
            <div class="fg"><label class="fl">Années d'exp.</label><input class="fi" type="number" id="f_exp" placeholder="16"></div>
            <div class="fg"><label class="fl">LinkedIn <span class="opt">(opt.)</span></label><input class="fi" id="f_linkedin" placeholder="https://linkedin.com/in/..."></div>
          </div>
        </div>
        <button class="add-btn">+ Ajouter un(e) collaborateur(rice)</button>
        <div class="snav"><button class="btn-back" onclick="go(3)">← Retour</button><div><button class="btn-skip" onclick="go(5)">Plus tard</button><button class="btn-next" onclick="saveTeam()">Continuer →</button></div></div>
      </div>

      <!-- ===== STEP 5: BIO ===== -->
      <div class="step" data-step="5">
        <div class="step-hdr"><div class="lbl">Étape 5 · À propos</div><h2>Présentez votre cabinet</h2><p>Texte visible sur votre page publique.</p></div>
        <div class="fg"><label class="fl">Tagline</label><input class="fi" id="f_tagline" placeholder="Votre slogan en une phrase"></div>
        <div class="fg"><label class="fl">Description</label><textarea class="fi ft" id="f_desc" rows="4" placeholder="Fondé en 2008, notre cabinet accompagne les indépendants..."></textarea><div class="fh">2-3 phrases suffisent. Enrichissable depuis le dashboard.</div></div>
        <div class="fr">
          <div class="fg"><label class="fl">Accréditation <span class="opt">(opt.)</span></label><input class="fi" id="f_accred" placeholder="ITAA agréé"></div>
          <div class="fg"><label class="fl">Année de fondation <span class="opt">(opt.)</span></label><input class="fi" type="number" id="f_founded" placeholder="2008"></div>
        </div>
        <div class="snav"><button class="btn-back" onclick="go(4)">← Retour</button><div><button class="btn-skip" onclick="go(6)">Plus tard</button><button class="btn-next" onclick="saveBio()">Continuer →</button></div></div>
      </div>

      <!-- ===== STEP 6: SPECIALIZATIONS ===== -->
      <div class="step" data-step="6">
        <div class="step-hdr"><div class="lbl">Étape 6 · Spécialisations</div><h2>Vos domaines d'expertise</h2><p>Sélectionnez ou personnalisez.</p></div>
        <div class="stags" id="specTags"></div>
        <div class="snav"><button class="btn-back" onclick="go(5)">← Retour</button><div><button class="btn-skip" onclick="go(7)">Plus tard</button><button class="btn-next" onclick="saveOnboardingStep('specializations',7)">Continuer →</button></div></div>
      </div>

      <!-- ===== STEP 7: TESTIMONIALS ===== -->
      <div class="step" data-step="7">
        <div class="step-hdr"><div class="lbl">Étape 7 · Témoignages</div><h2>Avis de vos clients</h2><p>Renforcent la confiance. Ajoutez-en ou passez.</p></div>
        <div id="testimonialList"></div>
        <button class="add-btn" onclick="addTestimonialForm()">+ Ajouter un témoignage</button>
        <div class="clo tip" style="margin-top:10px"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg> Pas de témoignage ? Pas de souci, ajoutez-en plus tard.</div>
        <div class="snav"><button class="btn-back" onclick="go(6)">← Retour</button><div><button class="btn-skip" onclick="go(8)">Plus tard</button><button class="btn-next" onclick="saveOnboardingStep('testimonials',8)">Continuer →</button></div></div>
      </div>

      <!-- ===== STEP 8: NOTIFICATIONS ===== -->
      <div class="step" data-step="8">
        <div class="step-hdr"><div class="lbl">Étape 8 · Notifications</div><h2>Rappels automatiques</h2><p>Réduisez les no-shows.</p></div>
        <div class="trow"><div class="tlbl">Confirmation email<span class="sub">Dès la réservation</span></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
        <div class="trow"><div class="tlbl">Rappel email J-1<span class="sub">24h avant</span></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
        <div class="trow"><div class="tlbl">Rappel SMS J-1 <span style="padding:1px 5px;background:var(--gold-bg);border-radius:3px;font-size:.6rem;font-weight:700;color:var(--gold)">PRO</span><span class="sub">~0.05€/SMS</span></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
        <div class="trow"><div class="tlbl">Notification nouveau RDV<span class="sub">Vous recevez un email</span></div><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
        <div class="snav"><button class="btn-back" onclick="go(7)">← Retour</button><button class="btn-next" onclick="saveOnboardingStep('notifications',9)">Continuer →</button></div>
      </div>

      <!-- ===== STEP 9: CALL FILTER ===== -->
      <div class="step" data-step="9">
        <div class="step-hdr"><div class="lbl">Étape 9 · Filtre d'appels</div><h2>Arrêtez de décrocher</h2><p>Un numéro belge filtre vos appels.</p></div>
        <div style="background:var(--surface);border-radius:var(--radius);padding:16px;margin:10px 0">
          <div style="display:flex;flex-direction:column;gap:6px">
            <div style="display:flex;align-items:center;gap:8px;font-size:.8rem;color:var(--text-2)"><span style="width:22px;height:22px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700">1</span> Client appelle votre numéro Genda</div>
            <div style="margin-left:30px;font-size:.7rem;color:var(--text-4)">↓</div>
            <div style="display:flex;align-items:center;gap:8px;font-size:.8rem;color:var(--text-2)"><span style="width:22px;height:22px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700">2</span> VIP → Transféré · Autres → SMS booking</div>
            <div style="margin-left:30px;font-size:.7rem;color:var(--text-4)">↓</div>
            <div style="display:flex;align-items:center;gap:8px;font-size:.8rem;color:var(--text-2)"><span style="width:22px;height:22px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700">3</span> Urgence ? Tape 1 → Transféré</div>
          </div>
        </div>
        <div class="clo info"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg> Numéro activé après passage au plan Pro.</div>
        <div class="snav"><button class="btn-back" onclick="go(8)">← Retour</button><div><button class="btn-skip" onclick="saveOnboardingStep('call_filter',10)">Plus tard</button><button class="btn-next" onclick="saveOnboardingStep('call_filter',10)">Continuer →</button></div></div>
      </div>

      <!-- ===== STEP 10: AGENDA / CALENDRIER ===== -->
      <div class="step" data-step="10">
        <div class="step-hdr"><div class="lbl">Étape 10 · Agenda</div><h2>Synchronisez votre agenda</h2><p>Vos créneaux occupés seront automatiquement bloqués.</p></div>

        <div style="display:flex;flex-direction:column;gap:10px;margin:12px 0">
          <!-- Google Calendar -->
          <div class="cal-opt" id="calOptGoogle" onclick="selectCalendar('google')" style="display:flex;align-items:center;gap:14px;padding:16px;background:var(--surface);border:2px solid var(--border-light);border-radius:var(--radius);cursor:pointer;transition:border-color .2s">
            <div style="width:40px;height:40px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:1.4rem"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
            <div style="flex:1">
              <div style="font-weight:600;font-size:.9rem;color:var(--text-1)">Google Calendar</div>
              <div style="font-size:.75rem;color:var(--text-3)">Gmail, Google Workspace</div>
            </div>
            <div class="cal-check" style="width:24px;height:24px;border-radius:50%;border:2px solid var(--border-light);display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .2s"></div>
          </div>

          <!-- Outlook -->
          <div class="cal-opt" id="calOptOutlook" onclick="selectCalendar('outlook')" style="display:flex;align-items:center;gap:14px;padding:16px;background:var(--surface);border:2px solid var(--border-light);border-radius:var(--radius);cursor:pointer;transition:border-color .2s">
            <div style="width:40px;height:40px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:1.4rem"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22 6 12 13 2 6"/></svg></div>
            <div style="flex:1">
              <div style="font-weight:600;font-size:.9rem;color:var(--text-1)">Outlook / Microsoft 365</div>
              <div style="font-size:.75rem;color:var(--text-3)">Hotmail, Office 365, Exchange</div>
            </div>
            <div class="cal-check" style="width:24px;height:24px;border-radius:50%;border:2px solid var(--border-light);display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .2s"></div>
          </div>

          <!-- Apple Calendar -->
          <div class="cal-opt" id="calOptApple" onclick="selectCalendar('apple')" style="display:flex;align-items:center;gap:14px;padding:16px;background:var(--surface);border:2px solid var(--border-light);border-radius:var(--radius);cursor:pointer;transition:border-color .2s">
            <div style="width:40px;height:40px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:1.4rem"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3c-1-1-3.5-1.5-5 0s-2 4 0 7c1.5 2.5 3.5 3 5 5 1.5-2 3.5-2.5 5-5 2-3 1.5-5.5 0-7s-4-1-5 0Z"/><path d="M12 3c0-1 .5-2 2-2"/></svg></div>
            <div style="flex:1">
              <div style="font-weight:600;font-size:.9rem;color:var(--text-1)">Apple Calendar (iCal)</div>
              <div style="font-size:.75rem;color:var(--text-3)">Export ICS · Pas de sync en temps réel</div>
            </div>
            <div class="cal-check" style="width:24px;height:24px;border-radius:50%;border:2px solid var(--border-light);display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .2s"></div>
          </div>

          <!-- Aucun -->
          <div class="cal-opt" id="calOptNone" onclick="selectCalendar('none')" style="display:flex;align-items:center;gap:14px;padding:16px;background:var(--surface);border:2px solid var(--border-light);border-radius:var(--radius);cursor:pointer;transition:border-color .2s">
            <div style="width:40px;height:40px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:1.4rem"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg></div>
            <div style="flex:1">
              <div style="font-weight:600;font-size:.9rem;color:var(--text-1)">Je n'utilise pas d'agenda en ligne</div>
              <div style="font-size:.75rem;color:var(--text-3)">Vous pourrez toujours en ajouter un plus tard</div>
            </div>
            <div class="cal-check" style="width:24px;height:24px;border-radius:50%;border:2px solid var(--border-light);display:flex;align-items:center;justify-content:center;font-size:.7rem;transition:all .2s"></div>
          </div>
        </div>

        <div id="calConnectBox" style="display:none;margin:10px 0">
          <div class="clo info" id="calConnectMsg"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> La connexion sera activée depuis votre dashboard après l'inscription.</div>
        </div>

        <div class="snav"><button class="btn-back" onclick="go(9)">← Retour</button><div><button class="btn-skip" onclick="goLive()">Plus tard</button><button class="btn-next" onclick="saveCalendarChoice()">Publier mon site →</button></div></div>
      </div>

      <!-- ===== STEP 11: GO LIVE ===== -->
      <div class="step" data-step="11">
        <div class="step-hdr"><div class="lbl"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5.8 11.3L2 22l10.7-3.79"/><path d="M4 3h.01"/><path d="M22 8h.01"/><path d="M15 2h.01"/><path d="M22 20h.01"/><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"/><path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17"/><path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7"/><path d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2z"/></svg> C'est prêt !</div><h2>Votre cabinet est en ligne</h2></div>
        <div class="golive">
          <div class="icon"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#22C55E"><circle cx="12" cy="12" r="4" fill="currentColor"/></svg></div>
          <h3 id="goliveName">Votre cabinet</h3>
          <p>Votre page pro est en ligne et prête à recevoir des réservations.</p>
          <div class="url" id="goliveUrl" onclick="copyUrl()">genda.be/votre-cabinet</div>
          <div class="acts">
            <a onclick="copyUrl()"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> Copier</a>
            <a href="#" id="goliveLinkPreview" target="_blank"><svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><path d="M8.5 2h7"/><path d="M7 16.5h10"/></svg> Tester</a>
            <a href="/dashboard.html" class="pri">Mon dashboard →</a>
          </div>
        </div>
        <div class="clo tip" style="margin-top:16px"><strong>Prochaines étapes :</strong><br>• Partagez le lien dans votre signature email<br>• Mettez-le sur Google My Business<br>• Testez une réservation vous-même</div>
      </div>

    </div>
  </main>
</div>

<script type="module">
import { GendaAPI, GendaUI } from '/js/api-client.js';
const api = new GendaAPI();
let currentStep = 0;
let sector = null;
let bizData = {}; // Saved after signup

// ============================================================
// REDIRECT IF ALREADY LOGGED IN
// ============================================================
if (api.isLoggedIn() && !new URLSearchParams(location.search).get('onboarding')) {
  window.location.href = '/dashboard.html';
}

// ============================================================
// SECTOR SELECT
// ============================================================
function selSec(btn, s) {
  document.querySelectorAll('.sec-btn').forEach(b => b.classList.remove('sel'));
  btn.classList.add('sel');
  sector = s;
}

function updSlug() {
  const v = document.getElementById('f_biz').value;
  const slug = v.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'').slice(0,40);
  document.getElementById('slugPrev').textContent = slug || 'votre-cabinet';
}

// ============================================================
// STEP NAVIGATION
// ============================================================
function go(n) {
  document.querySelector('.step.active')?.classList.remove('active');
  document.querySelector(`.step[data-step="${n}"]`)?.classList.add('active');
  currentStep = n;
  hideError();

  // Progress bar
  if (n > 0 && n <= 11) {
    const pct = Math.round((n / 11) * 100);
    document.getElementById('pFill').style.width = pct + '%';
    document.getElementById('pLabel').textContent = `Étape ${n}/11`;
    document.getElementById('pPct').textContent = pct + '%';
    document.getElementById('prog').classList.add('show');
  } else {
    document.getElementById('prog').classList.remove('show');
  }

  updateLeftPanel(n);
  document.querySelector('.right').scrollTop = 0;
}

function showError(msg) {
  const el = document.getElementById('errMsg');
  el.textContent = msg;
  el.classList.add('show');
}
function hideError() {
  document.getElementById('errMsg').classList.remove('show');
}

const leftTexts = {
  0: ['Créez votre <em>cabinet en ligne</em>', 'En quelques minutes, une page pro + booking intégré.'],
  1: ['<em>Identité</em> de votre cabinet', 'Visible sur votre page publique et confirmations.'],
  2: ['Définissez vos <em>horaires</em>', 'Vos clients ne voient que les créneaux disponibles.'],
  3: ['Configurez vos <em>prestations</em>', 'Templates adaptés à votre secteur.'],
  4: ['Présentez votre <em>équipe</em>', 'Chaque praticien a son propre agenda.'],
  5: ['Racontez votre <em>histoire</em>', 'Un cabinet avec description inspire 3x plus confiance.'],
  6: ['Montrez votre <em>expertise</em>', 'Aide vos clients et votre référencement Google.'],
  7: ['La preuve <em>sociale</em>', 'Témoignages = facteur #1 de conversion.'],
  8: ['Zéro <em>no-show</em>', 'Les rappels réduisent les absences de 60%.'],
  9: ['Finies les <em>interruptions</em>', '78% des appels filtrés → RDV en ligne.'],
  10: ['Synchronisez votre <em>agenda</em>', 'Vos créneaux occupés bloquent les réservations.'],
  11: ['<em>Félicitations !</em>', 'Votre cabinet est en ligne. Partagez le lien.']
};

function updateLeftPanel(n) {
  const t = leftTexts[n] || leftTexts[0];
  document.getElementById('lTitle').innerHTML = t[0];
  document.getElementById('lDesc').textContent = t[1];
}

// ============================================================
// STEP 0: SIGNUP → POST /api/auth/signup
// ============================================================
async function doSignup() {
  hideError();
  const name = document.getElementById('f_name').value.trim();
  const email = document.getElementById('f_email').value.trim();
  const bizName = document.getElementById('f_biz').value.trim();
  const pass = document.getElementById('f_pass').value;

  if (!name) return showError('Votre nom est requis.');
  if (!email) return showError('Votre email est requis.');
  if (!bizName) return showError('Le nom du cabinet est requis.');
  if (!sector) return showError('Choisissez votre secteur d\'activité.');
  if (pass && pass.length < 8) return showError('Le mot de passe doit faire au moins 8 caractères.');

  const btn = document.getElementById('btnSignup');
  GendaUI.btnLoading(btn, true);

  try {
    const result = await api.signup({
      full_name: name,
      email,
      password: pass || undefined,
      business_name: bizName,
      sector
    });

    bizData = result;

    // Pre-fill tagline from sector
    document.getElementById('f_tagline').value = '';

    // Pre-fill owner info
    const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0,2);
    document.getElementById('ownerAvatar').textContent = initials;
    document.getElementById('ownerName').textContent = name;

    // Build sector-specific UI
    buildScheduleGrid();
    buildServiceList();
    buildSpecTags();

    GendaUI.toast('Compte créé ! Configurons votre cabinet.', 'success');
    go(1);

  } catch (err) {
    showError(err.message || 'Erreur lors de la création du compte');
  } finally {
    GendaUI.btnLoading(btn, false);
  }
}

// ============================================================
// STEP 1: CABINET INFO → PATCH /api/business
// ============================================================
async function saveCabinetInfo() {
  const phone = document.getElementById('f_phone').value.trim();
  const address = document.getElementById('f_addr').value.trim();
  const parking = document.getElementById('f_parking').value.trim();
  const lang = document.getElementById('f_lang').value;

  try {
    await api.updateSettings({
      phone: phone || undefined,
      address: address || undefined,
      parking_info: parking || undefined,
      language_default: lang
    });
    await api.updateOnboarding('cabinet_info');
    GendaUI.toast('Informations enregistrées', 'success');
    go(2);
  } catch (err) {
    showError(err.message);
  }
}

// ============================================================
// STEP 2: SCHEDULE (display only — defaults already created)
// ============================================================
function buildScheduleGrid() {
  const days = ['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi','Dimanche'];
  const defaults = [
    {on:true,am:'09:00 – 12:00',pm:'13:00 – 17:00'},
    {on:true,am:'09:00 – 12:00',pm:'13:00 – 17:00'},
    {on:true,am:'09:00 – 12:00',pm:'13:00 – 17:00'},
    {on:true,am:'09:00 – 12:00',pm:'13:00 – 17:00'},
    {on:true,am:'09:00 – 12:00',pm:'13:00 – 16:00'},
    {on:false,am:'—',pm:'—'},
    {on:false,am:'—',pm:'—'}
  ];
  const grid = document.getElementById('schedGrid');
  grid.innerHTML = '';
  days.forEach((d, i) => {
    const r = defaults[i];
    grid.innerHTML += `<div class="schrow">
      <span class="schday" ${!r.on?'style="color:var(--text-4)"':''}>${d}</span>
      <div class="tog ${r.on?'on':''}" onclick="this.classList.toggle('on')"></div>
      <input class="schi" value="${r.am}" ${!r.on?'disabled':''}>
      <input class="schi" value="${r.pm}" ${!r.on?'disabled':''}>
    </div>`;
  });
}

async function saveSchedule() {
  try {
    await api.updateOnboarding('schedule');
    GendaUI.toast('Horaires confirmés', 'success');
    go(3);
  } catch (err) { showError(err.message); }
}

// ============================================================
// STEP 3: SERVICES (display template, already created by signup)
// ============================================================
function buildServiceList() {
  const colors = ['#15803D','#E07A5F','#E07A5F','#B45309','#1D4ED8','#78716C'];
  // Services were already created by signup — just show them
  const svcTemplates = {
    coiffeur: [{n:'Coupe femme',m:'45 min · 35 €'},{n:'Coupe homme',m:'25 min · 22 €'},{n:'Coloration',m:'60 min · 55 €'},{n:'Mèches / Balayage',m:'90 min · 85 €'},{n:'Brushing',m:'30 min · 25 €'},{n:'Soin kératine',m:'90 min · 95 €'}],
    esthetique: [{n:'Soin visage complet',m:'60 min · 65 €'},{n:'Manucure',m:'30 min · 28 €'},{n:'Pédicure',m:'45 min · 35 €'},{n:'Épilation jambes',m:'30 min · 30 €'},{n:'Extension cils',m:'90 min · 75 €'},{n:'Maquillage',m:'45 min · 45 €'}],
    massage: [{n:'Massage relaxant',m:'60 min · 65 €'},{n:'Massage sportif',m:'45 min · 55 €'},{n:'Réflexologie plantaire',m:'45 min · 50 €'},{n:'Massage duo',m:'60 min · 120 €'},{n:'Aromathérapie',m:'75 min · 80 €'}],
    osteo: [{n:'Première consultation',m:'60 min · 60 €'},{n:'Consultation suivi',m:'45 min · 55 €'},{n:'Urgence',m:'30 min · 60 €'},{n:'Ostéo pédiatrique',m:'30 min · 50 €'},{n:'Ostéo sportive',m:'45 min · 55 €'}],
    medecin: [{n:'Consultation',m:'20 min · 30 €'},{n:'Consult longue',m:'40 min · 55 €'},{n:'Téléconsultation',m:'15 min · 25 €'},{n:'Certificat',m:'10 min · 20 €'}],
    dentiste: [{n:'Contrôle annuel',m:'30 min · 40 €'},{n:'Détartrage',m:'30 min · 60 €'},{n:'Soin dentaire',m:'45 min · 80 €'},{n:'Urgence',m:'30 min · 75 €'}],
    kine: [{n:'Première séance',m:'45 min · 45 €'},{n:'Séance classique',m:'30 min · 30 €'},{n:'Séance longue',m:'60 min · 55 €'},{n:'Rééducation',m:'45 min · 40 €'}],
    comptable: [{n:'Premier contact',m:'30 min · Gratuit'},{n:'Déclaration IPP',m:'45 min · 120 €'},{n:'Consultation TVA',m:'30 min · 95 €'},{n:'Question société',m:'45 min · 150 €'},{n:'Création d\'activité',m:'60 min · 200 €'},{n:'Suivi dossier',m:'20 min · 75 €'}],
    avocat: [{n:'Consult initiale',m:'30 min · Gratuit'},{n:'Consult juridique',m:'60 min · 150 €'},{n:'Rédaction contrat',m:'90 min · 250 €'},{n:'Suivi dossier',m:'30 min · 100 €'}],
    veterinaire: [{n:'Consultation',m:'20 min · 40 €'},{n:'Vaccination',m:'15 min · 50 €'},{n:'Détartrage',m:'60 min · 150 €'},{n:'Consultation NAC',m:'30 min · 45 €'},{n:'Urgence',m:'30 min · 75 €'}],
    photographe: [{n:'Portrait individuel',m:'60 min · 120 €'},{n:'Shooting couple',m:'90 min · 200 €'},{n:'Photo corporate',m:'120 min · 350 €'},{n:'Mini-session',m:'30 min · 75 €'}],
    autre: [{n:'Première consult',m:'30 min · Gratuit'},{n:'Standard',m:'45 min · 100 €'},{n:'Suivi',m:'20 min · 50 €'}]
  };
  const svcs = svcTemplates[sector] || svcTemplates.autre;
  const el = document.getElementById('svcList');
  el.innerHTML = '';
  svcs.forEach((s, i) => {
    el.innerHTML += `<div class="svc">
      <div class="dot" style="background:${colors[i%colors.length]}"></div>
      <div class="inf"><div class="nm">${s.n}</div><div class="mt">${s.m}</div></div>
      <div class="tog on" onclick="this.classList.toggle('on')"></div>
    </div>`;
  });
}

// ============================================================
// STEP 4: TEAM → PATCH /api/site/practitioners/:id
// ============================================================
async function saveTeam() {
  const bio = document.getElementById('f_bio').value.trim();
  const exp = document.getElementById('f_exp').value;
  const linkedin = document.getElementById('f_linkedin').value.trim();

  try {
    // We need the practitioner ID — get it from /api/auth/me or store it
    // For now, the first practitioner is the owner, get it from dashboard
    const dashboard = await api.getDashboard();
    const pracId = dashboard.practitioners?.[0]?.id;
    if (pracId) {
      await api.updatePractitioner(pracId, {
        bio: bio || undefined,
        years_experience: exp ? parseInt(exp) : undefined,
        linkedin_url: linkedin || undefined
      });
    }
    await api.updateOnboarding('team');
    GendaUI.toast('Profil mis à jour', 'success');
    go(5);
  } catch (err) { showError(err.message); }
}

// ============================================================
// STEP 5: BIO → PATCH /api/business
// ============================================================
async function saveBio() {
  const tagline = document.getElementById('f_tagline').value.trim();
  const desc = document.getElementById('f_desc').value.trim();
  const accred = document.getElementById('f_accred').value.trim();
  const founded = document.getElementById('f_founded').value;

  try {
    await api.updateSettings({
      tagline: tagline || undefined,
      description: desc || undefined,
      accreditation: accred || undefined,
      founded_year: founded ? parseInt(founded) : undefined
    });
    await api.updateOnboarding('bio_description');
    GendaUI.toast('Description enregistrée', 'success');
    go(6);
  } catch (err) { showError(err.message); }
}

// ============================================================
// STEP 6: SPECIALIZATIONS (display template, already created)
// ============================================================
function buildSpecTags() {
  const specTemplates = {
    coiffeur: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></svg> Coupe femme','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></svg> Coupe homme','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r="0.5" fill="currentColor"/><circle cx="17.5" cy="10.5" r="0.5" fill="currentColor"/><circle cx="8.5" cy="7.5" r="0.5" fill="currentColor"/><circle cx="6.5" cy="12.5" r="0.5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2Z"/></svg> Coloriste','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg> Balayage & Mèches','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2v4"/><path d="M18 10v4"/><path d="M18 18v4"/><circle cx="18" cy="8" r="2"/><circle cx="18" cy="16" r="2"/><path d="M6 6v12"/><circle cx="6" cy="12" r="4"/></svg> Barbier','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="2" width="12" height="20" rx="4"/><path d="M6 12h12"/><path d="M12 2v4"/></svg> Soins capillaires','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg> Coiffure événement','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></svg> Extensions'],
    esthetique: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c6-3.5 8-10 8-14 0-.5 0-1-.5-1.5C18 5 14 3 12 2c-2 1-6 3-7.5 4.5C4 7 4 7.5 4 8c0 4 2 10.5 8 14z"/><path d="M5 8.5c2.5 2 4.5 4.5 5 8.5"/><path d="M19 8.5c-2.5 2-4.5 4.5-5 8.5"/></svg> Soins visage','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2v14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2"/><path d="M6 8h12"/><path d="M10 18v4"/><path d="M14 18v4"/></svg> Onglerie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h4l2-4 2 4h4"/><path d="M8 16l-3-5h14l-3 5"/><circle cx="12" cy="4" r="2"/></svg> Épilation','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg> Regard (cils & sourcils)','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"/><path d="M12 4v4"/><path d="M12 16v4"/></svg> Maquillage','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="2" width="12" height="20" rx="4"/><path d="M6 12h12"/><path d="M12 2v4"/></svg> Anti-âge','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg> Beauté des mains','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5 10 7.3 10 8 9 10c-1.5 3-2 3.5-2 5v1"/><path d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 1.8 0 2.5 1 4.5 1.5 3 2 3.5 2 5v1"/><path d="M6 18a2 2 0 1 0 4 0"/><path d="M14 22a2 2 0 1 0 4 0"/></svg> Pédicure médicale'],
    massage: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c6-3.5 8-10 8-14 0-.5 0-1-.5-1.5C18 5 14 3 12 2c-2 1-6 3-7.5 4.5C4 7 4 7.5 4 8c0 4 2 10.5 8 14z"/><path d="M5 8.5c2.5 2 4.5 4.5 5 8.5"/><path d="M19 8.5c-2.5 2-4.5 4.5-5 8.5"/></svg> Relaxation','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="18" r="3"/><path d="M11 4a1 1 0 1 0 2 0 1 1 0 0 0-2 0"/><path d="m6 18 4-8h4l3 5"/></svg> Massage sportif','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5 10 7.3 10 8 9 10c-1.5 3-2 3.5-2 5v1"/><path d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 1.8 0 2.5 1 4.5 1.5 3 2 3.5 2 5v1"/><path d="M6 18a2 2 0 1 0 4 0"/><path d="M14 22a2 2 0 1 0 4 0"/></svg> Réflexologie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.9C15.5 4.9 17 3.5 19 2c1 2 2 4.5 1 8-1.5 5-4.5 8-9 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg> Aromathérapie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg> Shiatsu','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="4" r="2"/><path d="M4 20h4l2-4 2 4h4"/><path d="M8 16l-3-5h14l-3 5"/></svg> Ayurvéda','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg> Pierres chaudes','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg> Massage prénatal'],
    osteo: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z"/></svg> Structurel','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-2z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-2z"/></svg> Crânien','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6.081 20C2.6 20 1 17 1 13.5c0-3 1.2-5.5 3-7l2-1.5v10"/><path d="M17.92 20C21.4 20 23 17 23 13.5c0-3-1.2-5.5-3-7l-2-1.5v10"/><path d="M12 4v16"/><path d="M11 4H8.5a.5.5 0 0 0-.5.5V8"/><path d="M13 4h2.5a.5.5 0 0 1 .5.5V8"/></svg> Viscéral','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="18" r="3"/><path d="M11 4a1 1 0 1 0 2 0 1 1 0 0 0-2 0"/><path d="m6 18 4-8h4l3 5"/></svg> Ostéo sportive','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg> Pédiatrique','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="3"/><path d="M12 8c-4.5 0-5 4-5 7.5 0 2 .5 3.5 2 4.5h6c1.5-1 2-2.5 2-4.5 0-3.5-.5-7.5-5-7.5Z"/></svg> Femme enceinte'],
    medecin: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"/><circle cx="20" cy="10" r="2"/></svg> Médecine générale','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> Prévention','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"/><path d="m8.5 8.5 7 7"/></svg> Maladies chroniques','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg> Pédiatrie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg> Cardiologie'],
    dentiste: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5.5c-1.7-1.4-4-2-6-1.5C4 4.5 3 6 3 8c0 4 3 10 5 12 .7.7 1.5.5 2-.5l.5-1c.3-.7 1-1 1.5-1s1.2.3 1.5 1l.5 1c.5 1 1.3 1.2 2 .5 2-2 5-8 5-12 0-2-1-3.5-3-4-2-.5-4.3.1-6 1.5z"/></svg> Soins conservateurs','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg> Prothèses','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg> Orthodontie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 18h8"/><path d="M3 22h18"/><path d="M14 22a7 7 0 1 0 0-14h-1"/><path d="M9 14h2"/><path d="M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z"/><path d="M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3"/></svg> Radiologie'],
    kine: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg> Rééducation musculaire','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6.081 20C2.6 20 1 17 1 13.5c0-3 1.2-5.5 3-7l2-1.5v10"/><path d="M17.92 20C21.4 20 23 17 23 13.5c0-3-1.2-5.5-3-7l-2-1.5v10"/><path d="M12 4v16"/><path d="M11 4H8.5a.5.5 0 0 0-.5.5V8"/><path d="M13 4h2.5a.5.5 0 0 1 .5.5V8"/></svg> Respiratoire','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg> Thérapie manuelle','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="18" r="3"/><path d="M11 4a1 1 0 1 0 2 0 1 1 0 0 0-2 0"/><path d="m6 18 4-8h4l3 5"/></svg> Sport'],
    comptable: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg> Fiscalité indépendants','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg> Sociétés / SRL','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg> TVA','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg> Création entreprise','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 10h12"/><path d="M4 14h9"/><path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12a7.9 7.9 0 0 0 7.8 8 7.7 7.7 0 0 0 5.2-2"/></svg> Optimisation fiscale','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg> Conseil stratégique','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg> Comptes annuels','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg> Immobilier'],
    avocat: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2 2 7l10 5 10-5-10-5Z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg> Droit sociétés','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg> Droit travail','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg> Immobilier','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="7" cy="5" r="2"/><path d="M5.2 17H2v-1.5A4.5 4.5 0 0 1 6.5 11"/><circle cx="17" cy="5" r="2"/><path d="M18.8 17H22v-1.5a4.5 4.5 0 0 0-4.5-4.5"/><circle cx="12" cy="9" r="2"/><path d="M16 21v-1.5A4.5 4.5 0 0 0 12 15v0a4.5 4.5 0 0 0-4 4.5V21"/></svg> Droit familial','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4"/><path d="M19 17V5a2 2 0 0 0-2-2H4"/></svg> Contrats','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/></svg> Commercial'],
    veterinaire: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .137 1.217 1.5 2 2.5 2s2-.5 3-1l1-1"/><path d="M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.137 1.217-1.5 2-2.5 2s-2-.5-3-1l-1-1"/><path d="M8 14v.5"/><path d="M16 14v.5"/><path d="M11.25 16.25h1.5L12 17l-.75-.75Z"/></svg> Chiens & Chats','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 8.54V4a2 2 0 1 0-4 0v3"/><path d="M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1.93 1.93 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a1 1 0 0 1-1 1h-1a1 1 0 0 0-1 1"/><path d="M7.61 12.53a3 3 0 1 0-1.6 4.3"/><path d="M13 16a3 3 0 0 1 2.24 5"/><path d="M18 12h.01"/></svg> NAC','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5.5c-1.7-1.4-4-2-6-1.5C4 4.5 3 6 3 8c0 4 3 10 5 12 .7.7 1.5.5 2-.5l.5-1c.3-.7 1-1 1.5-1s1.2.3 1.5 1l.5 1c.5 1 1.3 1.2 2 .5 2-2 5-8 5-12 0-2-1-3.5-3-4-2-.5-4.3.1-6 1.5z"/></svg> Dentaire','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 7 9 3 5 7l4 4"/><path d="m17 11 4 4-4 4-4-4"/><path d="m8 12 4 4 6-6-4-4Z"/><path d="m16 8 3-3"/><path d="M9 21a6 6 0 0 0-6-6"/></svg> Échographie','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 2 4 4"/><path d="m17 7 3-3"/><path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5"/><path d="m9 11 4 4"/><path d="m5 19-3 3"/><path d="m14 4 6 6"/></svg> Vaccination','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2 6 14a2 2 0 0 0 0 2.83l1.17 1.17a2 2 0 0 0 2.83 0L22 6"/><path d="m4 18 2 2"/><line x1="12" y1="9" x2="12.01" y2="9"/></svg> Chirurgie'],
    photographe: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> Portrait','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 7 4 2v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9l4-2"/><path d="M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"/><path d="M18 22V5l-6-3-6 3v17"/><path d="M12 7v5"/><path d="M10 9h4"/></svg> Mariage','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg> Corporate','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg> Naissance','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg> Immobilier','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 6 3 6 3s3 0 6-3v-5"/></svg> Book professionnel'],
    autre: ['<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> Consultation','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></svg> Accompagnement','<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg> Conseil']
  };
  const specs = specTemplates[sector] || specTemplates.autre;
  const el = document.getElementById('specTags');
  el.innerHTML = '';
  specs.forEach((s, i) => {
    el.innerHTML += `<div class="stag ${i<4?'sel':''}" onclick="this.classList.toggle('sel')">${s}</div>`;
  });
}

// ============================================================
// STEP 7: TESTIMONIALS (empty by default)
// ============================================================
function addTestimonialForm() {
  const el = document.getElementById('testimonialList');
  const n = el.children.length + 1;
  el.innerHTML += `<div style="background:var(--white);border:1px solid var(--border-light);border-radius:var(--radius);padding:14px;margin-bottom:8px">
    <div class="fr"><div class="fg"><label class="fl">Nom</label><input class="fi" placeholder="Marc Henrard"></div><div class="fg"><label class="fl">Rôle</label><input class="fi" placeholder="Gérant, TechFlow SA"></div></div>
    <div class="fg"><label class="fl">Témoignage</label><textarea class="fi ft" rows="2" placeholder="Pierre m'a accompagné dans..."></textarea></div>
  </div>`;
}

// ============================================================
// GENERIC ONBOARDING STEP SAVE
// ============================================================
async function saveOnboardingStep(step, nextStep) {
  try {
    await api.updateOnboarding(step);
    go(nextStep);
  } catch (err) { showError(err.message); }
}

// ============================================================
// STEP 10: CALENDAR CHOICE
// ============================================================
let selectedCalendar = null;

function selectCalendar(type) {
  selectedCalendar = type;
  // Update visual selection
  document.querySelectorAll('.cal-opt').forEach(el => {
    el.style.borderColor = 'var(--border-light)';
    el.querySelector('.cal-check').innerHTML = '';
    el.querySelector('.cal-check').style.borderColor = 'var(--border-light)';
    el.querySelector('.cal-check').style.background = 'transparent';
  });
  const sel = document.getElementById('calOpt' + type.charAt(0).toUpperCase() + type.slice(1));
  if (sel) {
    sel.style.borderColor = 'var(--primary)';
    const check = sel.querySelector('.cal-check');
    check.innerHTML = '<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';
    check.style.borderColor = 'var(--primary)';
    check.style.background = 'var(--primary)';
    check.style.color = '#fff';
  }

  // Show info box
  const box = document.getElementById('calConnectBox');
  const msg = document.getElementById('calConnectMsg');
  if (type === 'none') {
    box.style.display = 'none';
  } else if (type === 'apple') {
    box.style.display = 'block';
    msg.innerHTML = '<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3c-1-1-3.5-1.5-5 0s-2 4 0 7c1.5 2.5 3.5 3 5 5 1.5-2 3.5-2.5 5-5 2-3 1.5-5.5 0-7s-4-1-5 0Z"/><path d="M12 3c0-1 .5-2 2-2"/></svg> Apple Calendar ne supporte pas la sync en temps réel. Vos RDV seront exportables en fichier .ics depuis le dashboard.';
  } else if (type === 'google') {
    box.style.display = 'block';
    msg.innerHTML = '<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> Après l\'inscription, connectez votre Google Calendar en un clic depuis <strong>Paramètres → Synchronisation calendrier</strong>.';
  } else if (type === 'outlook') {
    box.style.display = 'block';
    msg.innerHTML = '<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22 6 12 13 2 6"/></svg> Après l\'inscription, connectez votre Outlook en un clic depuis <strong>Paramètres → Synchronisation calendrier</strong>.';
  }
}

async function saveCalendarChoice() {
  try {
    // Save calendar preference in business settings
    if (selectedCalendar && selectedCalendar !== 'none') {
      await api.updateSettings({
        settings: { calendar_provider_preference: selectedCalendar }
      });
    }
  } catch (e) { /* non-blocking */ }
  goLive();
}

// ============================================================
// STEP 11: GO LIVE
// ============================================================
async function goLive() {
  try {
    await api.updateOnboarding('go_live');
  } catch (e) { /* non-blocking */ }

  const biz = api.getBusiness();
  const slug = biz?.slug || 'votre-cabinet';
  const name = biz?.name || 'Votre cabinet';

  document.getElementById('goliveName').textContent = name;
  document.getElementById('goliveUrl').textContent = `genda.be/${slug}`;
  document.getElementById('goliveLinkPreview').href = `/api/public/${slug}`;

  go(11);
  GendaUI.toast('<svg class="gi" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5.8 11.3L2 22l10.7-3.79"/><path d="M4 3h.01"/><path d="M22 8h.01"/><path d="M15 2h.01"/><path d="M22 20h.01"/><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"/><path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11v0c-.11.7-.72 1.22-1.43 1.22H17"/><path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98v0C9.52 4.9 9 5.52 9 6.23V7"/><path d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2z"/></svg> Votre cabinet est en ligne !', 'success', 6000);
}

function copyUrl() {
  const biz = api.getBusiness();
  const url = `https://genda.be/${biz?.slug || 'votre-cabinet'}`;
  navigator.clipboard?.writeText(url).then(() => {
    GendaUI.toast('Lien copié !', 'success');
  });
}

// Expose functions to inline onclick handlers
Object.assign(window, {
  selSec, updSlug, go, doSignup, saveCabinetInfo, saveSchedule,
  saveOnboardingStep, saveTeam, saveBio, addTestimonialForm,
  selectCalendar, saveCalendarChoice, goLive, copyUrl
});
</script>

<script>document.addEventListener('contextmenu',function(e){var t=e.target.tagName;if(t!=='INPUT'&&t!=='TEXTAREA'&&t!=='SELECT')e.preventDefault();},{passive:false});document.addEventListener('selectstart',function(e){var t=e.target.tagName;if(t!=='INPUT'&&t!=='TEXTAREA'&&t!=='SELECT')e.preventDefault();});</script>
<script>/* Kill mobile helpers */
document.addEventListener('contextmenu',function(e){var t=e.target.tagName;if(t!=='INPUT'&&t!=='TEXTAREA'&&t!=='SELECT')e.preventDefault();},{passive:false});
document.addEventListener('selectstart',function(e){var t=e.target.tagName;if(t!=='INPUT'&&t!=='TEXTAREA'&&t!=='SELECT')e.preventDefault();});
</script>
</body>
</html>
